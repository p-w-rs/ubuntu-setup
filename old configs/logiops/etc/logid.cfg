devices: (
{
  name: "MX Master 3";

  # SmartShift for automatic fast scrolling
  smartshift:
  {
    on: true;
    threshold: 20;
    torque: 50;
  };

  # Natural scrolling with adjusted speed
  hiresscroll:
  {
    hires: false;
    invert: true;
    target: false;
  };

  # Thumb wheel settings
  thumbwheel:
  {
    divert: false;
    invert: false;
  };

  # Resolution/DPI
  dpi: 1280;

  buttons: (
    {
      # Back button - Copy
      cid: 0x53;
      action =
      {
        type: "Keypress";
        keys: ["KEY_LEFTCTRL", "KEY_C"];
      };
    },
    {
      # Forward button - Paste
      cid: 0x56;
      action =
      {
        type: "Keypress";
        keys: ["KEY_LEFTCTRL", "KEY_V"];
      };
    },
    {
      # Mode shift button (behind scroll wheel)
      cid: 0xc4;
      action =
      {
        type: "ToggleSmartshift";
      };
    },
    {
      # Thumb button with gestures
      cid: 0xc3;
      action =
      {
        type: "Gestures";
        gestures: (
          {
            direction: "None";
            mode: "OnRelease";
            action =
            {
              type: "Keypress";
              keys: ["KEY_LEFTMETA"];
            };
          },
          {
            direction: "Left";
            mode: "OnRelease";
            action =
            {
              type: "Keypress";
              keys: ["KEY_LEFTCTRL", "KEY_LEFTALT", "KEY_RIGHT"];  # Next workspace
            };
          },
          {
            direction: "Right";
            mode: "OnRelease";
            action =
            {
              type: "Keypress";
              keys: ["KEY_LEFTCTRL", "KEY_LEFTALT", "KEY_LEFT"];  # Previous workspace
            };
          },
          {
            direction: "Up";
            mode: "OnRelease";
            action =
            {
              type: "Keypress";
              keys: ["KEY_LEFTMETA", "KEY_D"];  # Show desktop
            };
          },
          {
            direction: "Down";
            mode: "OnRelease";
            action =
            {
              type: "Keypress";
              keys: ["KEY_LEFTMETA", "KEY_A"];  # Show applications
            };
          }
        );
      };
    }
  );
},
{
  name: "MX Master 3S";

  # SmartShift for automatic fast scrolling
  smartshift:
  {
    on: true;
    threshold: 20;
    torque: 50;
  };

  # Natural scrolling with adjusted speed
  hiresscroll:
  {
    hires: false;
    invert: true;
    target: false;
  };

  # Thumb wheel settings
  thumbwheel:
  {
    divert: false;
    invert: false;
  };

  # Resolution/DPI
  dpi: 1280;

  buttons: (
    {
      # Back button - Copy
      cid: 0x53;
      action =
      {
        type: "Keypress";
        keys: ["KEY_LEFTCTRL", "KEY_C"];
      };
    },
    {
      # Forward button - Paste
      cid: 0x56;
      action =
      {
        type: "Keypress";
        keys: ["KEY_LEFTCTRL", "KEY_V"];
      };
    },
    {
      # Mode shift button (behind scroll wheel)
      cid: 0xc4;
      action =
      {
        type: "ToggleSmartshift";
      };
    },
    {
      # Thumb button with gestures
      cid: 0xc3;
      action =
      {
        type: "Gestures";
        gestures: (
          {
            direction: "None";
            mode: "OnRelease";
            action =
            {
              type: "Keypress";
              keys: ["KEY_LEFTMETA"];
            };
          },
          {
            direction: "Left";
            mode: "OnRelease";
            action =
            {
              type: "Keypress";
              keys: ["KEY_LEFTCTRL", "KEY_LEFTALT", "KEY_RIGHT"];  # Next workspace
            };
          },
          {
            direction: "Right";
            mode: "OnRelease";
            action =
            {
              type: "Keypress";
              keys: ["KEY_LEFTCTRL", "KEY_LEFTALT", "KEY_LEFT"];  # Previous workspace
            };
          },
          {
            direction: "Up";
            mode: "OnRelease";
            action =
            {
              type: "Keypress";
              keys: ["KEY_LEFTMETA", "KEY_D"];  # Show desktop
            };
          },
          {
            direction: "Down";
            mode: "OnRelease";
            action =
            {
              type: "Keypress";
              keys: ["KEY_LEFTMETA", "KEY_A"];  # Show applications
            };
          }
        );
      };
    }
  );
}
);
